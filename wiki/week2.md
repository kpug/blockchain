# Week2 How Bitcoin Achieves Decentralization

스크루지 코인은 확연한 문제가 있었다. 바로 중앙 집권화된 권한, 스크루지가 문제였다.
비트 코인은 이 문제를 순수 기술이 아닌 것으로 해결했다. 기술과 영리한 인센티브 공학의 조합이었다.

## Centralizations vs. Decentralization

비트코인에서 탈중앙화의 관점

1. Who maintains the ledger?
2. Who has authority over which transactions are valid?
3. Who creates new bitcoins?
4. Who determines how the rules of the system change?
5. How do bitcoins acquire exchange value?

여기에서 앞에 세가지에 대해서 이 강의에서 살펴볼 것이다.

비트코인의 관점에서 탈중앙화의 특징

* Peer-to-Peer network
* Mining
* Updates to software

## Distributed Consensus

기술적으로 분산 e-cash 시스템을 만들 때 해결해야 하는것은 분산 합의(distributed consensus)이다.

구글이나 페이스북을 생각해보자. 큰 시스템에 데이터를 분산해서 저장할 때는 모두 다 저장되거나 모두다 저장되지 않으면 큰 문제가 없다. 그러나 한개의 노드에서만 저장되면 일관성이 깨져 문제가 생길 수 있다.

이것이 분산 합의에 관한 전통적인 연구에 동기를 부여한 핵심적인 문제다.
 
이를 해결하면 DNS나 공용 키 디렉터리, 주식 거래와 같은 애플리케이션을 만들 수 있다. 

비트 코인은 이를 해결 했고, 이 강의에서 살펴볼 것이다. 관련한 문제에 대한 해결책을 볼 것이다.

이후에는 알트 코인(Alt coin)에 대해서 살펴볼 것이다. 알트 코인은 간단하게 비트코인의 원칙을 달성한 유사한 시스템들이다.

이제 분산 합의에 문제를 해결해보자. 그리고 이를 통해 글로벌 분산 key-value 저장소를 만들 수 있다.

## 분산 합의의 정의

고정된 수 n이 프로세스의 노드이고, 어떤 입력이 있다고 하자. 그리고 분산 합의 프로토콜이 있다.

분산 합의 프로토콜은 2가지 요구사항을 만족해야 한다.

* 프로토콜은 종료되어 지며, 모든 올바른 노드는 동일한 값을 결정한다.
* 이 값은 임의의 값일 수 없다. 그리고 올바른 노드 중 적어도 하나에 의해 입력으로 제안 된 값이어야 한다.

비트코인의 관점에서 살펴보면 엘리스가 밥에게 지불할 때 P2P로 구현된 모든 비트코인 노드에 트랜젝션을 전송한다.

이 트랜젝션은 다른 노드가 진위성을 판별하기 위해 앨리스의 서명과, 밥이 비트코인을 받을 주소를 접근하기 위한 밥의 공개키가 담겨있다. 또한 앨리스가 그 코인을 취득한 경로 파악을 위한 해시 포인터도 있다.
이 구조를 가진 것이 트랜젝션이다.

비트코인에서는 특정시간에 아래와 같은 특징이 있다.

* 모든 노드는 합의에 도달한 일련의 트랜젝션 블록을 가진다.
* 각 노드에는 전파된 미해결 트랜젝션들이 있다.

트랜젝션 단위로 합의를 하는 것은 비효율적이어서 대신 블록을 단위로 합의를 한다.

합의가 이루어지면 블록 체인에 추가한다. 이것이 비트코인과 유사한 점이 있지만, 비트코인은 정확하게는 이렇지 않다.

아주 다양한 이유에서 이 방법을 수행하는 것은 정말 어려운 기술적 문제가 있다.

노드가 죽거나 감염되었을 수 있다. 네트워크는 완벽하지 않다.

* Not all pairs of node connected
* Faults in network
* Latency

사실 이러한 제약 때문에 분산 합의에 관한 많은 문헌은 비관적이다.
매우 잘 알려진 불가능한 결과가 아래 2가지 이다.

* Byzantine generals problem
* Fischer-Lynch-Paterson

비트코인 합의는 이론보다는 실제적으로 더 잘 동작한다.

비트코인이 다른 점은 인센티브가 있다. 이것이 가상 화폐이기 때문에 가능하다. 또한 무작위성을 포용한다. 

* 특정 종말 점에 대한 개념을 버리지 않는다. (;Does away with the notion of a specific end-point)
* 오랜시간에 걸쳐 합의가 발생한다.

대기시간이 길수록 확률은 더 높아지고, 거래에 대한 가정을 잘 못 했을 가능성이 기하급수적으로 줄어 든다.

## Consensus without Identity: the Block Chain

// TBD

비트코인의 합의 알고리즘을 기술적으로 더 자세히 살펴보자.

합의 알고리즘의 간단한 버전은 아래와 같다.

1. 모든 노드에 새로운 트랜젝션이 전파된다. 
2. 각 노드는 블록에 새로운 트랜젝션을 수집한다.
3. 각 회차에 임의의 노드는 블록을 전파한다.
4. 다른 노드는 모든 트랜젝션이 유효할 때 블록을 승인한다.
5. 노드는 다음 블럭에 대한 해시를 포함시켜 블록에 대한 의견을 표현한다.

이 프로세스에 악의적인 노드가 끼어드는 경우를 살펴보자.

// TBD

## Incentives and Proof of Work

// TBD

## Putting It All Together

// TBD
